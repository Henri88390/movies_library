<div class="modal-overlay" *ngIf="isOpen" (click)="onBackdropClick($event)">
  <div class="modal-content">
    <div class="modal-header">
      <h2>üé¨ Create New Movie</h2>
      <button class="close-btn" (click)="onCancel()" type="button">
        &times;
      </button>
    </div>

    <form [formGroup]="createForm" (ngSubmit)="onSave()" class="modal-form">
      <div class="form-group">
        <label for="movieName">Movie Name *</label>
        <input
          id="movieName"
          type="text"
          formControlName="name"
          class="form-input"
          [class.error]="getFieldError('name')"
          placeholder="Enter movie name"
        />
        <div class="field-error" *ngIf="getFieldError('name')">
          {{ getFieldError("name") }}
        </div>
      </div>

      <div class="form-group">
        <label for="director">Director *</label>
        <input
          id="director"
          type="text"
          formControlName="realisator"
          class="form-input"
          [class.error]="getFieldError('realisator')"
          placeholder="Enter director name"
        />
        <div class="field-error" *ngIf="getFieldError('realisator')">
          {{ getFieldError("realisator") }}
        </div>
      </div>

      <div class="form-group">
        <label for="rating">Rating *</label>
        <app-star-rating />
        <div class="field-error" *ngIf="getFieldError('rating')">
          {{ getFieldError("rating") }}
        </div>
      </div>

      <div class="form-group">
        <label for="duration">Duration</label>
        <input
          id="duration"
          type="time"
          formControlName="duration"
          class="form-input"
          [class.error]="getFieldError('duration')"
          max="10:00"
        />
        <small class="form-help"
          >Optional: Movie duration in hours and minutes (max 10 hours)</small
        >
        <div class="field-error" *ngIf="getFieldError('duration')">
          {{ getFieldError("duration") }}
        </div>
      </div>

      <div class="form-group">
        <label for="imageFile">Movie Poster</label>
        <input
          id="imageFile"
          type="file"
          accept="image/*"
          class="form-input file-input"
          (change)="onFileSelected($event)"
        />
        <small class="form-help"
          >Optional: Upload a movie poster (max 5MB)</small
        >

        <div class="image-preview" *ngIf="imagePreview">
          <img [src]="imagePreview" alt="Movie poster preview" />
          <button
            type="button"
            class="remove-image-btn"
            (click)="removeImage()"
          >
            ‚úï Remove
          </button>
        </div>
      </div>

      <div class="error" *ngIf="error">
        <p>‚ùå {{ error }}</p>
      </div>

      <div class="modal-actions">
        <button
          type="button"
          class="btn btn-cancel"
          (click)="onCancel()"
          [disabled]="loading"
        >
          Cancel
        </button>
        <button
          type="submit"
          class="btn btn-save"
          [disabled]="loading || createForm.invalid"
        >
          <span *ngIf="loading" class="spinner"></span>
          {{ loading ? "Creating..." : "Create Movie" }}
        </button>
      </div>
    </form>
  </div>
</div>
